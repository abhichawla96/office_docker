<projectcomponents xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" project="ProducerOne" xsi:noNamespaceSchemaLocation="../../schemas/components_XSD.xsd">
  <component metaobject="prospect_status_lku;prospect_address;prospect_source_lku;agencypremiumvolumecommitted;agencycompanieslicensed;agency_business_source;agencyterminated;agencypersonalinformation;agencymergers;agency_master;agency_marketinformation;segment_industry_classes" name="prospectMarketInformation" stackdisplayname="Prospects Market Information">

<!-- Special Commission, Agency Appearance, Comment on neighboring, Narrative of Agent Sections Added - Phase 2 -->  	
  	<action deltaind="M" name="save">
	      <workflow deltaind="I" name="saveNarrativeInformation" seq="3">
    		<function name="generateRequestXml" functionid="generateRequestXml" parameters="context,:fieldsForInputXml,inputXml" executionsequence="0" />
			<storedprocedureoperation name="insertUpdateDeleteOnboardingNarrativeSupplement_p" dbspname="insertUpdateDeleteOnboardingNarrativeSupplement_p" id="insertUpdateDeleteOnboardingNarrativeSupplement_p"
					 metaobject="onboarding_narrative_supplement" executionsequence="1" operation="4">
				<parameteroperation indexno="0" seq="1" property="inputXml" mode="IN"></parameteroperation>
				<resultsetoperation indexno="0" seq="1" mappingclass="java.util.HashMap"></resultsetoperation>
			</storedprocedureoperation>
		</workflow>
		<!-- Agency's Total P&C Written Premium Previous Year End - Start - Phase 2  -->
		<workflow deltaind="M" eval="ProducerOneRule.isInetErrorListEmpty" name="saveMarketInformation" seq="0">
        
			<storedprocedureoperation deltaind="M" dbspname="insert_update_delete_agency_current_market_information_p" eval="ProducerOneRule.isShowMarketInformationFreeformFields" executionsequence="3" id="insert_update_delete_prospect_current_market_information_p" metaobject="agency_current_market_informations" name="insert_update_delete_prospect_current_market_information_p" operation="1">
    			<parameteroperation deltaind="I" indexno="17" mode="IN" property="total_written_premium_previous_year_end" seq="18"/>
			</storedprocedureoperation>
		</workflow>
		
		<!-- Phase 2 - US : OB-PPRM-04-005 -->
		 <workflow deltaind="I" eval="foreign_languages_spoken_in_agency_security" name="insertUpdateForeignLanguagesSpokenInAgencyWorkflow" seq="1">
     	         <storedprocedureoperation deltaind="I" dbspname="insertUpdateForeignLanguagesSpokenInAgency_p" executionsequence="1" id="insertUpdateForeignLanguagesSpokenInAgency_p" metaobject="tbl_marketinformation" name="insertUpdateForeignLanguagesSpokenInAgency_p" operation="4" >
					<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/>
					<parameteroperation indexno="1" mode="IN" property="foreign_languages" seq="2"/>
					<parameteroperation indexno="2" mode="IN" property="last_updated_by" seq="3"/>
					<resultsetoperation indexno="0" mappingclass="java.util.HashMap"> </resultsetoperation>		
				</storedprocedureoperation>
			</workflow>
		
  <!-- Phase 2 - US : OB-PPRM-04-005-->
		
  	 <workflow deltaind="I" eval="primary_company_usage_security" name="insertUpdatePrimaryCompanyUsageWorkflow" seq="2">
    	         <storedprocedureoperation deltaind="I" dbspname="insertUpdatePrimaryCompanyUsage_p" executionsequence="1" id="insertUpdatePrimaryCompanyUsage_p" metaobject="tbl_marketinformation" name="insertUpdatePrimaryCompanyUsage_p" operation="4" >
				<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/>
				<parameteroperation indexno="1" mode="IN" property="primary_company_usage_desc" seq="2"/>
				<parameteroperation indexno="2" mode="IN" property="last_updated_by" seq="3"/>
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"> </resultsetoperation>		
			</storedprocedureoperation>
		</workflow> 
	 
	<!--Phase 2 - US : OB-PPRM-04-005-->
	
	  <workflow deltaind="I" name="insertUpdateCurrentAdvertisingMethodsWorkflow" seq="3">
    	         <storedprocedureoperation deltaind="I" dbspname="insertUpdateCurrentAdvertisingMethods_p" executionsequence="1" id="insertUpdateCurrentAdvertisingMethods_p" metaobject="tbl_marketinformation" name="insertUpdateCurrentAdvertisingMethods_p" operation="4" >
				<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/>
				<parameteroperation indexno="1" mode="IN" property="current_advertising_methods_desc" seq="2"/>
				<parameteroperation indexno="2" mode="IN" property="last_updated_by" seq="3"/>
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"> </resultsetoperation>		
			</storedprocedureoperation>
		</workflow>  
  <!--Phase 2 - US : OB-PPRM-04-005 (Commercial Lines)-->
			
		 <workflow deltaind="I" name="insertUpdateTblMarketInformationLobSectionsWorkflow" seq="4">
     	         <storedprocedureoperation deltaind="I" dbspname="insertUpdateTblMarketInformationLobSections_p" executionsequence="1" id="insertUpdateTblMarketInformationLobSections_p" metaobject="tbl_marketinformation_lob" name="insertUpdateTblMarketInformationLobSections_p" operation="4" >
					<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/>
					<parameteroperation indexno="1" mode="IN" property="is_agency_share_contingency" seq="2"/>
					<parameteroperation indexno="2" mode="IN" property="agency_pay_commission_to_producers" seq="3"/>
					<parameteroperation indexno="3" mode="IN" property="is_agency_commercial_business" seq="4"/>
					<parameteroperation indexno="4" mode="IN" property="is_agencys_service_center" seq="5"/>
					<parameteroperation indexno="5" mode="IN" property="premium_threshold" seq="6"/>
					<parameteroperation indexno="6" mode="IN" property="commercial_premium_threshold" seq="7"/>
					<parameteroperation indexno="7" mode="IN" property="industry_makeup_agency_commercial" seq="8"/>
					<parameteroperation indexno="8" mode="IN" property="accounts_size" seq="9"/>
					<parameteroperation indexno="9" mode="IN" property="last_updated_by" seq="10"/> 
					<resultsetoperation indexno="0" mappingclass="java.util.HashMap"> </resultsetoperation>		
				</storedprocedureoperation>
			</workflow> 
			
			 <!--Phase 2 - US : OB-PPRM-04-005 (Production Commitment)-->
			 
			<workflow deltaind="I"  name="insertUpdateTblMarketInformationProdCommitmentWorkflow" seq="5">
     	         <storedprocedureoperation deltaind="I"  dbspname="insertUpdateTblMarketInformationProdCommitment_p" executionsequence="1" id="insertUpdateTblMarketInformationProdCommitment_p" metaobject="tbl_marketinformation_lob" name="insertUpdateTblMarketInformationProdCommitment_p" operation="4" >
					<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/>
					<parameteroperation indexno="1" mode="IN" property="production_commitment_first_year" seq="2"/>
					<parameteroperation indexno="2" mode="IN" property="production_commitment_second_year" seq="3"/>
					<parameteroperation indexno="3" mode="IN" property="production_commitment_third_year" seq="4"/>
					<parameteroperation indexno="4" mode="IN" property="production_commitment_achieve_volume" seq="5"/>
					<parameteroperation indexno="9" mode="IN" property="last_updated_by" seq="6"/> 
					<resultsetoperation indexno="0" mappingclass="java.util.HashMap"> </resultsetoperation>		
				</storedprocedureoperation>
			</workflow>
    </action>
    
    <action deltaind="M" name="view">
  		<workflow deltaind="M" name="view" seq="0">
  			<databaseoperation deltaind="M" executionsequence="0" metaobject="agency_current_market_informations" name="getProspectCurrentMarketInfoRecord" operation="3" sqlstmt="select total_written_premium_previous_year_end, total_annual_revenue,market_num_locations,dbo.getAmountFormat(total_premium_PC) as total_premium_PC ,dbo.getAmountFormat(total_premium_compensation) as total_premium_compensation,no_workers_policies,      dbo.getAmountFormat(total_writtenpremium) as total_writtenpremium, mix_of_personal_business, mix_of_commercial_business , new_business from agency_current_market_informations where prospect_agency_id=#prospect_agency_id#"/>
  		
  		<!-- Phase 2 - Adding Life Volume, PL Volume and CL Volume Column in Market Information - Start -->
  			 <databaseoperation deltaind="M" eval="ProducerOneRule.isTopCompanyLicensedListEmpty" executionsequence="5" metaobject="agency_marketinformation" name="getProspectMarketInformationList" operation="5" sqlstmt="select row_number() over(order by marketinformation_id) rownum,(select description from carrier_lku cl where cl.carrier_id=am.carrier_id) as carrier_id_desc,        (select description from lob_lku where lob_id=am.lob_id) as lob_desc,       case when loss_ratio is null or loss_ratio='' then '' else REPLACE(CONVERT(varchar(15), [loss_ratio], 1), '.00', '') end as loss_ratio,       dbo.getAmountFormat(writtenpremium) as writtenpremium,retentionrate,commissionrate,marketinformation_id ,dbo.getAmountFormat(cast(class1volume as numeric(15,0))) as class1volume,dateofappointment,       convert(varchar(20),dateofappointment,101) as dateofappointmentFormatted,yearofappointment,carrier_id,agency_id,       dbo.getAmountFormat(cast(PY_written_premium as numeric(15,0))) as PY_written_premium,years_represented,other_company_description, dbo.getAmountFormat(cast(pl_volume as numeric(15,0))) as pl_volume , dbo.getAmountFormat(cast(cl_volume as numeric(15,0))) as cl_volume , dbo.getAmountFormat(cast(life_volume as numeric(15,0))) as life_volume from agency_marketinformation am where prospect_agency_id=#prospect_agency_id#" viewid="agencyMarketInformation_list_listfreeform_1"/>
   		<!-- Phase 2 - Adding Life Volume, PL Volume and CL Volume Column in Market Information - End -->
  		</workflow>
  		<!-- Agency's Total P&C Written Premium Previous Year End - End - Phase 2 -->
  		
  		<!-- Phase 2 - US : OB-PPRM-04-005 -->
  	<workflow deltaind="I" name="prospectForeignLanguagesSpokenInAgencyWorkflow" seq="10">
    	      <storedprocedureoperation deltaind="I" dbspname="agencyForeignLanguagesSpokenInAgency_p" executionsequence="0" id="agencyForeignLanguagesSpokenInAgency_p" metaobject="agencyListPublicSubmitNInvitationEdit" name="agencyForeignLanguagesSpokenInAgency_p" operation="5" viewid="foreignLanguageSpokenInAgencyStep6_list_mom_1">
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"></resultsetoperation>		
			 </storedprocedureoperation>
    	     <storedprocedureoperation deltaind="I" dbspname="getagencyForeignLanguagesSpokenInAgencyProspect_p" executionsequence="1" id="getagencyForeignLanguagesSpokenInAgencyProspect_p" metaobject="agencyListPublicSubmitNInvitationEdit" name="getagencyForeignLanguagesSpokenInAgencyProspect_p" operation="3">
				<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/> 
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"></resultsetoperation>		
			</storedprocedureoperation>
		</workflow> 
		
		<!-- Phase 2 - US : OB-PPRM-04-005 -->
		
  	<workflow deltaind="I" name="primaryCompanyUsageWorkflow" seq="11">
    	     <storedprocedureoperation deltaind="I" dbspname="agencyPrimaryCompanyUsage_p" executionsequence="0" id="agencyPrimaryCompanyUsage_p" metaobject="agencyListPublicSubmitNInvitationEdit" name="agencyPrimaryCompanyUsage_p" operation="5" viewid="primaryCompanyUsageStep6_list_mom_1">
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"></resultsetoperation>		
			</storedprocedureoperation>
    	    <storedprocedureoperation deltaind="I" dbspname="getAgencyPrimaryCompanyUsageProspect_p" executionsequence="1" id="getAgencyPrimaryCompanyUsageProspect_p" metaobject="agencyListPublicSubmitNInvitationEdit" name="getAgencyPrimaryCompanyUsageProspect_p" operation="3">
				<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/> 
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"></resultsetoperation>		
			</storedprocedureoperation>
	 </workflow>
	 
	 <!-- Phase 2 - US : OB-PPRM-04-005 -->
	 
	   <workflow deltaind="I" name="agencyCurrentAdvertisingMethodsWorkflow" seq="12">
    	      <storedprocedureoperation deltaind="I" dbspname="agencyCurrentAdvertisingMethods_p" executionsequence="0" id="agencyCurrentAdvertisingMethods_p" metaobject="agencyListPublicSubmitNInvitationEdit" name="agencyCurrentAdvertisingMethods_p" operation="5" viewid="currentAdvertisingMethodStep6_list_mom_1">
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"></resultsetoperation>		
			</storedprocedureoperation>
    	     <storedprocedureoperation deltaind="I" dbspname="getagencyCurrentAdvertisingMethodsProspect_p" executionsequence="1" id="getagencyCurrentAdvertisingMethodsProspect_p" metaobject="agencyListPublicSubmitNInvitationEdit" name="getagencyCurrentAdvertisingMethodsProspect_p" operation="3">
				<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/> 
				<resultsetoperation indexno="0" mappingclass="java.util.HashMap"></resultsetoperation>		
			</storedprocedureoperation>
	</workflow> 
	 <!-- Phase 2 - US : OB-PPRM-04-005 -->
	 
	 <workflow deltaind="I" name="getMarketInformationLobSections" seq="13">
         		<storedprocedureoperation deltaind="I" dbspname="getTblMarketInformationLobSectionsProspect_p" executionsequence="0" id="getTblMarketInformationLobSectionsProspect_p" metaobject="tbl_marketinformation_lob" name="getTblMarketInformationLobSectionsProspect_p" operation="3">
						<parameteroperation indexno="0" mode="IN" property="prospect_agency_id" seq="1"/>
						<resultsetoperation indexno="1" mappingclass="java.util.HashMap"/>
				</storedprocedureoperation>
     	   </workflow> 
  	</action>
  	
  	<!-- Phase 2 - Adding Life Volume, PL Volume and CL Volume Column in Market Information - Start -->
  	<action deltaind="M" name="addAgencyCompanyPremiumLicensed">
  		<actionparam deltaind="M" eval="ProducerOneRule.isInetErrorListEmpty" executionsequence="0" form="Y" name="removeparams" paramid="removeparams" post="Y" remove="Y" removeparams="carrier_id,class1volume,loss_ratio,dateofappointment,yearofappointment,PY_written_premium,years_represented,carrier_id_desc,life_volume,pl_volume,cl_volume" session="Y"/>  
  	</action>
  	<!-- Phase 2 - Adding Life Volume, PL Volume and CL Volume Column in Market Information - End -->
  </component>
</projectcomponents>
